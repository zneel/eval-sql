-- MySQL Script generated by MySQL Workbench
-- Fri Mar 10 09:58:03 2017
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema ecommerce
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema ecommerce
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `eval_ecommerce` DEFAULT CHARACTER SET utf8 ;
USE `eval_ecommerce` ;

-- -----------------------------------------------------
-- Table `eval_ecommerce`.`customers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_ecommerce`.`customers` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `gender` VARCHAR(45) NOT NULL,
  `firstname` VARCHAR(45) NOT NULL,
  `lastname` VARCHAR(45) NOT NULL,
  `email` VARCHAR(255) NOT NULL,
  `phone` VARCHAR(20) NULL,
  `address` VARCHAR(255) NULL,
  `zipcode` INT(5) UNSIGNED NULL,
  `city` VARCHAR(45) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `eval_ecommerce`.`productCategories`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_ecommerce`.`productCategories` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(45) NOT NULL,
  `description` VARCHAR(255) NULL,
  `parentCategories_id` INT UNSIGNED NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_productCategories_productCategories1_idx` (`parentCategories_id` ASC),
  CONSTRAINT `fk_productCategories_productCategories1`
    FOREIGN KEY (`parentCategories_id`)
    REFERENCES `eval_ecommerce`.`productCategories` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `eval_ecommerce`.`products`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_ecommerce`.`products` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(100) NOT NULL,
  `weight` DECIMAL(5,2) NOT NULL DEFAULT 1,
  `price` DECIMAL(9,2) NOT NULL,
  `available` TINYINT(1) NULL DEFAULT 1,
  `description` TEXT NULL,
  `productCategories_id` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_products_productCategories1_idx` (`productCategories_id` ASC),
  CONSTRAINT `fk_products_productCategories1`
    FOREIGN KEY (`productCategories_id`)
    REFERENCES `eval_ecommerce`.`productCategories` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `eval_ecommerce`.`orderStatus`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_ecommerce`.`orderStatus` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(45) NOT NULL,
  `description` VARCHAR(255) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `eval_ecommerce`.`orders`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_ecommerce`.`orders` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `orderedAt` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP(),
  `customers_id` INT UNSIGNED NOT NULL,
  `orderStatus_id` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_order_customer1_idx` (`customers_id` ASC),
  INDEX `fk_order_orderStatus1_idx` (`orderStatus_id` ASC),
  CONSTRAINT `fk_order_customer1`
    FOREIGN KEY (`customers_id`)
    REFERENCES `eval_ecommerce`.`customers` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_order_orderStatus1`
    FOREIGN KEY (`orderStatus_id`)
    REFERENCES `eval_ecommerce`.`orderStatus` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `eval_ecommerce`.`orderItemsStatus`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_ecommerce`.`orderItemsStatus` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(45) NOT NULL,
  `description` VARCHAR(255) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `eval_ecommerce`.`orderItems`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_ecommerce`.`orderItems` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `quantity` INT(3) NOT NULL DEFAULT 1,
  `price` DECIMAL(9,2) NOT NULL,
  `products_id` INT UNSIGNED NOT NULL,
  `orders_id` INT UNSIGNED NOT NULL,
  `orderItemsStatus_id` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_orderItem_product_idx` (`products_id` ASC),
  INDEX `fk_orderItem_order1_idx` (`orders_id` ASC),
  INDEX `fk_orderItems_orderItemsStatus1_idx` (`orderItemsStatus_id` ASC),
  CONSTRAINT `fk_orderItem_product`
    FOREIGN KEY (`products_id`)
    REFERENCES `eval_ecommerce`.`products` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_orderItem_order1`
    FOREIGN KEY (`orders_id`)
    REFERENCES `eval_ecommerce`.`orders` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_orderItems_orderItemsStatus1`
    FOREIGN KEY (`orderItemsStatus_id`)
    REFERENCES `eval_ecommerce`.`orderItemsStatus` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `eval_ecommerce`.`invoiceStatus`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_ecommerce`.`invoiceStatus` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(45) NOT NULL,
  `description` VARCHAR(255) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `eval_ecommerce`.`invoices`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_ecommerce`.`invoices` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `createdAt` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP(),
  `orders_id` INT UNSIGNED NOT NULL,
  `invoiceStatus_id` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_invoices_order1_idx` (`orders_id` ASC),
  INDEX `fk_invoices_invoiceStatus1_idx` (`invoiceStatus_id` ASC),
  CONSTRAINT `fk_invoices_order1`
    FOREIGN KEY (`orders_id`)
    REFERENCES `eval_ecommerce`.`orders` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_invoices_invoiceStatus1`
    FOREIGN KEY (`invoiceStatus_id`)
    REFERENCES `eval_ecommerce`.`invoiceStatus` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `eval_ecommerce`.`payments`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_ecommerce`.`payments` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `paidAt` DATETIME NOT NULL,
  `amount` DECIMAL(5,2) NOT NULL,
  `invoices_id` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_payments_invoices1_idx` (`invoices_id` ASC),
  CONSTRAINT `fk_payments_invoices1`
    FOREIGN KEY (`invoices_id`)
    REFERENCES `eval_ecommerce`.`invoices` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `eval_ecommerce`.`shipments`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_ecommerce`.`shipments` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `tracking_number` INT UNSIGNED NOT NULL,
  `shippedAt` DATETIME NULL,
  `orders_id` INT UNSIGNED NOT NULL,
  `invoices_id` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_shipments_order1_idx` (`orders_id` ASC),
  INDEX `fk_shipments_invoices1_idx` (`invoices_id` ASC),
  CONSTRAINT `fk_shipments_order1`
    FOREIGN KEY (`orders_id`)
    REFERENCES `eval_ecommerce`.`orders` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_shipments_invoices1`
    FOREIGN KEY (`invoices_id`)
    REFERENCES `eval_ecommerce`.`invoices` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `eval_ecommerce`.`shipmentsItems`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `eval_ecommerce`.`shipmentsItems` (
  `orderItems_id` INT UNSIGNED NOT NULL,
  `shipments_id` INT UNSIGNED NOT NULL,
  INDEX `fk_shipmentsItems_orderItem1_idx` (`orderItems_id` ASC),
  INDEX `fk_shipmentsItems_shipments1_idx` (`shipments_id` ASC),
  CONSTRAINT `fk_shipmentsItems_orderItem1`
    FOREIGN KEY (`orderItems_id`)
    REFERENCES `eval_ecommerce`.`orderItems` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_shipmentsItems_shipments1`
    FOREIGN KEY (`shipments_id`)
    REFERENCES `eval_ecommerce`.`shipments` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Set table charset
-- -----------------------------------------------------
ALTER TABLE `eval_ecommerce`.`customers` CHARSET=utf8; -- ok
ALTER TABLE `eval_ecommerce`.`productCategories` CHARSET=utf8; -- ok
ALTER TABLE `eval_ecommerce`.`products` CHARSET=utf8; -- ok
ALTER TABLE `eval_ecommerce`.`invoiceStatus` CHARSET=utf8; -- ok
ALTER TABLE `eval_ecommerce`.`orderItemsStatus` CHARSET=utf8; -- ok
ALTER TABLE `eval_ecommerce`.`orderStatus` CHARSET=utf8; -- ok
ALTER TABLE `eval_ecommerce`.`orders` CHARSET=utf8; -- ok
ALTER TABLE `eval_ecommerce`.`orderItems` CHARSET=utf8; -- ok
ALTER TABLE `eval_ecommerce`.`shipmentsItems` CHARSET=utf8;
ALTER TABLE `eval_ecommerce`.`shipments` CHARSET=utf8;
ALTER TABLE `eval_ecommerce`.`payments` CHARSET=utf8;
ALTER TABLE `eval_ecommerce`.`invoices` CHARSET=utf8;

-- -----------------------------------------------------
-- INSERT : customers
-- -----------------------------------------------------
INSERT INTO `eval_ecommerce`.`customers` (`id`,`gender`,`firstname`,`lastname`,`email`
  ,`phone`,`address`,  `zipcode`,  `city`)
VALUES
(1,'M.','Fusce','Semper','fusce.semper@mail.com', '0262112233','12 rue Cras eu pulvinar', '97410', 'Saint-Pierre'),
(2,'Mme','Nulla','Enim','nulla.enim@mail.com', '0262223344','66 avenue efficitur vitae', '97410', 'Saint-Pierre'),
(3,'M','Maximus','Urna','maximus.urna@mail.com', '0692123123','66 bis magna sed', '97400', 'Saint-Denis'),
(4,'Mme','Elementum','Leo','elementum.leo@mail.com', '0692456789','93 chemin dapibus vitae', '97400', 'Saint-Denis'),
(5,'M','Ipsum','Sagittis','ipsum.sagittis@mail.com', '0693447788','47 rue lectus vitae', '97400', 'Saint-Denis'),
(6,'Mme','Mattis','Amet','mattis.amet@mail.com', '0262147896','38 rue dolor in ligula', '97424', 'Saint-Leu'),
(7,'M','Maecena','Neque','maecena.neque@mail.com', '0262357159','2 chemin dapibus sem', '97490', 'Sainte-Clotilde'),
(8,'Mme','Eget','Viverra','eget.vivera@mail.com', '0693333222','15 rue  suscipit ut', '97440', 'Saint-André');

-- -----------------------------------------------------
-- INSERT : productCategories
-- -----------------------------------------------------

INSERT INTO `eval_ecommerce`.`productCategories`(`id` ,  `title` ,  `description`)
VALUES
(1,'TV & Video','Some Tvs and Video player'),
(2,'Camera, Photo & Video','Keep your souvenirs'),
(3,'Computers','Computers for casual to gamer'),
(4,'Video games','Have some fun'),
(5,'Accessories','Some stuff you are probably need');

-- -----------------------------------------------------
-- INSERT : products
-- -----------------------------------------------------

INSERT INTO `eval_ecommerce`.`products`( `id` ,  `name` ,  `weight` ,  `price`,
  `available` ,  `description`,  `productCategories_id`)
VALUES
(1, 'TV Lorem ipsum',2,359.99,1,'Great tv lorem ipsum',1),
(2, 'Curabitur sit',3,9999.99,1,'The Mona Lisa of the tv',1),
(3, 'Platinium',2.5,4500,1,'The quality has a new name',1),
(4, 'Elementum quam',2.5,230,0,'The good for all',1),
(5, 'Consectetur',5,190,0,'It does the work',1),

(6, 'Congue 3000',0.5,1899,1,'Take a picture of the moon',2),
(7, 'Xram 400',0.4,500,1,'The camera for all the family',2),
(8, 'Cataclysm picture',0.3,5500,0,'THE camera',2),

(9, 'Vestibulum tempus Xtreme',5,2300,1,'The dream gamer laptop',3),
(10, 'Aenean bibendum Black Edition',5,1500,1,'Pleasure of gaming',3),
(11, 'Litora torquent family',4,500,1,'A computer for all the family',3),
(12, 'Lamepple',3,1500,1,'An expansive computer for what he can do...',3),
(13, 'Megacomputer Deluxe',6,1000,0,'best computer ever',3),
(14, 'Cheapest Deluxe',6,100,0,'Computer for all !',3),

(15, 'Zeldi 1',0.1,56,0,'The adventure game',4),
(16, 'Mortal Unicorn Battle',0.1,70,1,'A gore girly combat game',4),
(17, 'Gigawatch',0.1,30,1,'Shoot them all',4),
(18, 'Caribou warrior',0.1,30,0,'No one can\'t him from him',4),

(19, 'USB stick Star wars',0.1,10,1,'Store your datainto the Force',4);

-- -----------------------------------------------------
-- INSERT : invoiceStatus
-- -----------------------------------------------------

INSERT INTO `eval_ecommerce`.`invoiceStatus`(`id`,  `title`,  `description`)
VALUES
(1,'New','You just created a invoice. Your customer has not received or opened the invoice yet'),
(2,'Undelivered','Invoice has not been sent'),
(3,'Sent','You emailed the invoice. It is waiting for your customer to open it.'),
(4,'Approved','your invoice has been reviewed and the dollar amount was approved'),
(5,'Scheduled','Your invoice has been scheduled to be paid on a set date'),
(6,'Closed','Payment has been made');

-- -----------------------------------------------------
-- INSERT : orderItemsStatus
-- -----------------------------------------------------
INSERT INTO `eval_ecommerce`.`orderItemsStatus` ( `id`,  `title`)
VALUES
(1,'Delivered'),
(2,'Out of stock');

-- -----------------------------------------------------
-- INSERT : orderStatus
-- -----------------------------------------------------
INSERT INTO `eval_ecommerce`.`orderStatus` ( `id`,  `title`)
VALUES
(1,'Completed'),
(2,'Cancelled');

-- -----------------------------------------------------
-- INSERT : orders
-- -----------------------------------------------------
INSERT INTO `eval_ecommerce`.`orders` ( `id`,   `orderedAt`,  `customers_id`,  `orderStatus_id`)
VALUES
(1,'2016-11-23 08:00:00',1,1),
(2,'2016-12-06 18:30:00',1,2),
(3,'2016-12-23 23:15:00',1,1),
(4,'2017-01-02 06:48:00',2,1),
(5,'2017-01-08 09:15:00',3,1),
(6,'2017-01-08 14:39:00',5,1),
(7,'2017-01-08 19:15:00',2,2),
(8,'2017-01-10 15:15:00',3,1),
(9,'2017-01-11 12:01:00',6,1),
(10,'2017-01-12 16:23:00',4,2),
(11,'2017-01-14 13:27:00',3,1),
(12,'2017-01-15 13:27:00',5,1),
(13,'2017-01-15 13:29:00',6,1),
(15,'2017-01-15 13:31:00',5,1),
(16,'2017-01-15 13:32:00',6,2);


-- -----------------------------------------------------
-- INSERT : orderItems
-- -----------------------------------------------------
INSERT INTO `eval_ecommerce`.`orderItems` ( `id`,  `quantity`,  `price`,  `products_id`,  `orders_id`,  `orderItemsStatus_id` )
VALUES
(1,2,719.98,1,1,1),
(2,3,29999.97,2,2,2),
(3,1,9999.99,2,3,1),
(4,2,112,15,4,1),
(5,1,70,16,5,1),
(6,4,120,18,6,1),
(7,1,1899,6,7,2),
(8,1,100,14,8,1),
(9,1,5500,8,8,1),
(10,1,5500,8,8,1),
(11,2,9000,7,9,1),
(12,1,190,5,9,1),
(13,1,2300,9,10,2),
(14,3,30,19,10,2),
(15,1,30,18,11,1),
(16,3,90,18,12,1),
(17,3,90,17,12,1),
(18,3,210,16,12,1),
(19,2,140,16,13,1),
(20,1,1500,10,15,1),
(21,10,15000,12,16,2);


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
